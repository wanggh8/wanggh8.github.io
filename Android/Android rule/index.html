<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Android Rule | Petithao</title><meta name="description" content="Android 开发项目规范和Git规范。"><meta name="keywords" content="Android"><meta name="author" content="wanggh8"><meta name="copyright" content="wanggh8"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/head.jpg"><link rel="canonical" href="https://wanggh8.gitee.io/Android/Android%20rule/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="Android Rule"><meta property="og:url" content="https://wanggh8.gitee.io/Android/Android%20rule/"><meta property="og:site_name" content="Petithao"><meta property="og:description" content="Android 开发项目规范和Git规范。"><meta property="og:image" content="https://wanggh8.gitee.io/images/android-black.jpg"><meta property="article:published_time" content="2020-08-27T02:31:12.000Z"><meta property="article:modified_time" content="2020-09-16T08:23:34.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: undefined,
  localSearch: {"path":"mysearch.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: false,
  highlightLang: false,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isSidebar: true,
  postUpdate: '2020-09-16 16:23:34'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/img/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">63</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">22</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Git%E8%A7%84%E8%8C%83"><span class="toc-text">一、Git规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Git%E5%88%86%E6%94%AF"><span class="toc-text">1. Git分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Git-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">2. Git 命令行操作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-TAG%E5%91%BD%E5%90%8D"><span class="toc-text">3. TAG命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-gitignore%E6%96%87%E4%BB%B6"><span class="toc-text">4. .gitignore文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%B3%A8%E9%87%8A%E8%A7%84%E8%8C%83"><span class="toc-text">二、注释规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E5%A4%B4%E6%B3%A8%E9%87%8A"><span class="toc-text">1. 文件头注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%96%B9%E6%B3%95%E3%80%81%E6%8E%A5%E5%8F%A3%E6%B3%A8%E9%87%8A"><span class="toc-text">2. 方法、接口注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%98%E9%87%8F%E6%B3%A8%E9%87%8A"><span class="toc-text">3. 变量注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9D%97%E6%B3%A8%E9%87%8A"><span class="toc-text">4. 块注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%89%B9%E6%AE%8A%E6%B3%A8%E9%87%8A"><span class="toc-text">5. 特殊注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Java%E8%A7%84%E8%8C%83"><span class="toc-text">三、Java规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-text">1. 命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B8%B8%E9%87%8F%E5%AE%9A%E4%B9%89"><span class="toc-text">2. 常量定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F"><span class="toc-text">3. 代码格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-text">4. 控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">5. 异常处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Android%E8%A7%84%E8%8C%83"><span class="toc-text">四、Android规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-text">1. 资源文件命名与使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6"><span class="toc-text">2. 基本组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-UI%E4%B8%8E%E5%B8%83%E5%B1%80"><span class="toc-text">3. UI与布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BF%9B%E7%A8%8B%E3%80%81%E7%BA%BF%E7%A8%8B%E4%B8%8E%E6%B6%88%E6%81%AF%E9%80%9A%E4%BF%A1"><span class="toc-text">4. 进程、线程与消息通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%96%87%E4%BB%B6%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">5. 文件与数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%9B%BE%E7%89%87%E4%B8%8E%E5%8A%A8%E7%94%BB"><span class="toc-text">6. 图片与动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%AE%89%E5%85%A8"><span class="toc-text">7. 安全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%97%A5%E5%BF%97"><span class="toc-text">8. 日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(/images/android-hero.png)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Petithao</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Android Rule</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-08-27T02:31:12.000Z" title="发表于 2020-08-27 10:31:12">2020-08-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-09-16T08:23:34.000Z" title="更新于 2020-09-16 16:23:34">2020-09-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Android/">Android</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="一、Git规范"><a href="#一、Git规范" class="headerlink" title="一、Git规范"></a>一、Git规范</h2><p>推荐使用 <strong>Github Desktop</strong> 客户端</p>
<h3 id="1-Git分支"><a href="#1-Git分支" class="headerlink" title="1. Git分支"></a>1. Git分支</h3><ol>
<li>master 存储正式发布历史的主分支，不能直接在<code>master</code>上进行修改代码和提交。</li>
<li>dev 作为开发分支，开发完成需要提交测试的功能合并到该分支，共同维护的开发分支。</li>
<li>release 上线前的 预览分支，可用于测试人员测试要上线的正式版，测试完成后PR到<code>master</code>。</li>
<li>feature 基于<code>dev</code>创建的临时分支，用于开发新功能或新模块，在本地与<code>dev</code>合并后PR到<code>dev</code>分支。</li>
</ol>
<h3 id="2-Git-命令行操作流程"><a href="#2-Git-命令行操作流程" class="headerlink" title="2. Git 命令行操作流程"></a>2. Git 命令行操作流程</h3>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 本地分支 local</span><br><span class="line"> git pull origin local</span><br><span class="line"> git add .</span><br><span class="line"> git commit -m &#39;&#39;   &#x2F;&#x2F; 这里需写明这次提交的改动说明（必须提交），以便以后回退找到对应的指针</span><br><span class="line"> git push origin local</span><br><span class="line"> </span><br><span class="line"> git checkout dev </span><br><span class="line"> git pull origin dev </span><br><span class="line"> </span><br><span class="line"> git checkout local  &#x2F;&#x2F;切换到自己的分支</span><br><span class="line"> git merge dev   &#x2F;&#x2F; 有冲突解决冲突，让冲突发生在自己本地分支</span><br><span class="line"> </span><br><span class="line"> git checkeout dev </span><br><span class="line"> git merge local  &#x2F;&#x2F;更新代码到 dev 分支</span><br><span class="line"> </span><br><span class="line"> git add .</span><br><span class="line"> git commit -m &quot;merge local 实现的功能&quot;</span><br><span class="line"> git push origin dev</span><br></pre></td></tr></table></figure>

<h3 id="3-TAG命名"><a href="#3-TAG命名" class="headerlink" title="3. TAG命名"></a>3. TAG命名</h3><p>采用三段式＋日期，v版本.里程碑.序号，如v1.2.1-20200801</p>
<ul>
<li>Bug修复并上线，修改第3位   </li>
<li>架构升级或重大调整，修改第2位</li>
<li>新功能上线或者模块调整，修改第2位</li>
</ul>
<h3 id="4-gitignore文件"><a href="#4-gitignore文件" class="headerlink" title="4. .gitignore文件"></a>4. .gitignore文件</h3><p>Android 忽略文件模版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># Built application 文件</span><br><span class="line">*.apk</span><br><span class="line">*.ap_</span><br><span class="line"></span><br><span class="line"># ART&#x2F;Dalvik VM 文件</span><br><span class="line">*.dex</span><br><span class="line"></span><br><span class="line"># Java class 文件</span><br><span class="line">*.class</span><br><span class="line"></span><br><span class="line"># Generated 文件夹</span><br><span class="line">bin&#x2F;</span><br><span class="line">gen&#x2F;</span><br><span class="line">out&#x2F;</span><br><span class="line"></span><br><span class="line"># IntelliJ (IDE配置文件)</span><br><span class="line">*.iml</span><br><span class="line">&#x2F;.idea</span><br><span class="line">.idea&#x2F;workspace.xml</span><br><span class="line">.idea&#x2F;tasks.xml</span><br><span class="line">.idea&#x2F;gradle.xml</span><br><span class="line">.idea&#x2F;assetWizardSettings.xml</span><br><span class="line">.idea&#x2F;dictionaries</span><br><span class="line">.idea&#x2F;libraries</span><br><span class="line">.idea&#x2F;caches</span><br><span class="line"></span><br><span class="line"># 本地配置文件 (sdk path, etc)</span><br><span class="line">local.properties</span><br><span class="line"></span><br><span class="line"># Android Studio captures folder</span><br><span class="line">captures&#x2F;</span><br><span class="line"></span><br><span class="line"># Log Files</span><br><span class="line">*.log</span><br><span class="line"></span><br><span class="line"># Android Studio导航编辑器临时文件</span><br><span class="line">.navigation&#x2F;</span><br><span class="line"></span><br><span class="line"># 在Android Studio 2.2及更高版本中生成的外部原生构建文件夹</span><br><span class="line">.externalNativeBuild</span><br><span class="line"></span><br><span class="line"># 密钥储存库文件</span><br><span class="line"># 如果您不想检查密钥库文件，请取消注释以下行</span><br><span class="line">#*.jks</span><br><span class="line"></span><br><span class="line"># 混淆文件</span><br><span class="line">app&#x2F;proguard&#x2F;class_files.txt</span><br><span class="line"></span><br><span class="line"># Gradle files</span><br><span class="line">.gradle&#x2F;</span><br><span class="line">build&#x2F;</span><br><span class="line"></span><br><span class="line"># Mac</span><br><span class="line">.DS_Store</span><br></pre></td></tr></table></figure>

<p>更新缓存 <code>git rm -r --cached .</code></p>
<hr>
<h2 id="二、注释规范"><a href="#二、注释规范" class="headerlink" title="二、注释规范"></a>二、注释规范</h2><ul>
<li>注释量必须不少于代码总量的15%</li>
<li>所有的类都必须添加创建者和创建日期</li>
<li>注释力求精简准确、表达到位，避免无用注释</li>
<li>中文注释描述，专有名词与关键字保持英文原文</li>
<li>代码和注释同步修改，尤其是参数、返回值等的修改</li>
<li>注释能够准确反应设计思想和代码逻辑，能描述业务含义</li>
<li>代码注释时除后续会恢复此段代码逻辑，否则应删除此段代码</li>
<li>多行注释与代码对齐，单行注释上方单独起一行，// 后空一个字符</li>
</ul>
<h3 id="1-文件头注释"><a href="#1-文件头注释" class="headerlink" title="1. 文件头注释"></a>1. 文件头注释</h3><p>Android Studio 中 Settings 搜索 File and Code Templates ，Includes下的File Header复制粘贴以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 文件描述</span><br><span class="line"> *</span><br><span class="line"> * @author wanggh8</span><br><span class="line"> * @version V1.0</span><br><span class="line"> * @date $&#123;DATE&#125;</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li>auther：开发成员标识，格式英文字母</li>
<li>version：源文件当前版本，初始版本V1.0</li>
<li>date：源文件创建时间，格式：2020/8/10</li>
</ul>
<h3 id="2-方法、接口注释"><a href="#2-方法、接口注释" class="headerlink" title="2. 方法、接口注释"></a>2. 方法、接口注释</h3><p>每一个成员方法和功能方法、接口必须在上方做多行注释（方便不进入源码看注释），注释模板如下（使用<code>/**</code> + <code>Enter</code>自动生成）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 执行类型检查</span><br><span class="line"> *</span><br><span class="line"> * @param id:id,不用时传-1;</span><br><span class="line"> * @param execNo:执行唯一编码</span><br><span class="line"> *&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法概述和参数之间空一行</li>
<li>方法如有返回值，说明返回值类型</li>
<li>参数如果传值为标记值如-1、0、1，需指明</li>
<li>方法内逻辑比较复杂时，需使用单行注释标记说明</li>
</ul>
<h3 id="3-变量注释"><a href="#3-变量注释" class="headerlink" title="3. 变量注释"></a>3. 变量注释</h3><ul>
<li>单起一行的单行注释</li>
<li>容易歧义的变量声明必须注释</li>
<li>常量、全局变量声明时必须做功能注释</li>
<li>有意义的英文命名的变量，非标记变量可不注释</li>
<li>标记变量如flag（取值-1、0、1），必须注释并加值说明</li>
<li>实体类、请求体、返回体中的变量必须注释，标记变量添加值说明</li>
</ul>
<h3 id="4-块注释"><a href="#4-块注释" class="headerlink" title="4. 块注释"></a>4. 块注释</h3><ul>
<li>块注释使用单起一行的单行注释</li>
<li>嵌套条件语句过多时必须为条件添加注释</li>
<li>逻辑复杂不易理解时，应注释说明此段代码功能</li>
</ul>
<h3 id="5-特殊注释"><a href="#5-特殊注释" class="headerlink" title="5. 特殊注释"></a>5. 特殊注释</h3><ul>
<li><p>FIXME：表示错误不能工作，需要处理，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; FIXME: 2020&#x2F;8&#x2F;21 Bug描述 by yourname</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>TODO：表示需要实现，但目前还未实现的功能，如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; TODO: 2020&#x2F;8&#x2F;21 将要实现的功能 by yourname </span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="三、Java规范"><a href="#三、Java规范" class="headerlink" title="三、Java规范"></a>三、Java规范</h2><h3 id="1-命名规范"><a href="#1-命名规范" class="headerlink" title="1. 命名规范"></a>1. 命名规范</h3><ul>
<li>代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。</li>
<li>类名使用 UpperCamelCase 风格，必须遵从驼峰形式，但以下情形例外:DO / BO / DTO / VO / AO</li>
<li>方法名、参数名、成员变量、局部变量都统一使用 lowerCamelCase 风格，必须遵从驼峰形式。</li>
<li>常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。</li>
<li>类中布尔类型的变量，都不要加 is，否则部分框架解析会引起序列化错误。</li>
<li>杜绝完全不规范的缩写，避免望文不知义。</li>
<li>为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达其意。</li>
<li>接口类中的方法和属性不要加任何修饰符号(public 也不要加)，保持代码的简洁性，并加上有效的 Javadoc 注释。尽量不要在接口里定义变量，如果一定要定义变量，肯定是与接口方法相关，并且是整个应用的基础常量。</li>
<li>枚举类名建议带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开。</li>
</ul>
<h3 id="2-常量定义"><a href="#2-常量定义" class="headerlink" title="2. 常量定义"></a>2. 常量定义</h3><ul>
<li>尽量不让任何魔法值(即未经定义的常量)直接出现在代码中。</li>
<li>long 或者 Long 初始赋值时，使用大写的 L，不能是小写的 l，小写容易跟数字 1 混 淆，造成误解。</li>
<li>不要使用一个常量类维护所有常量，按常量功能进行归类，分开维护。</li>
<li>如果变量值仅在一个范围内变化，且带有名称之外的延伸属性，定义为枚举类。</li>
</ul>
<h3 id="3-代码格式"><a href="#3-代码格式" class="headerlink" title="3. 代码格式"></a>3. 代码格式</h3><ul>
<li><p>大括号的使用约定。如果是大括号内为空，则简洁地写成{}即可，不需要换行;如果是非空代码块则:</p>
<ul>
<li>左大括号前不换行。</li>
<li>左大括号后换行。</li>
<li>右大括号前换行。</li>
<li>右大括号后还有else等代码则不换行;表示终止的右大括号后必须换行。</li>
</ul>
</li>
<li><p>左小括号和字符之间不出现空格;同样，右小括号和字符之间也不出现空格。详见第 5 条下方正例提示。反例:if (空格a == b空格)</p>
</li>
<li><p>if/for/while/switch/do 等保留字与括号之间都必须加空格。</p>
</li>
<li><p>任何二目、三目运算符的左右两边都需要加一个空格</p>
</li>
<li><p>采用 4 个空格缩进，禁止使用 tab 字符。说明:如果使用 tab 缩进，必须设置 1 个 tab 为 4 个空格。Android Studio设置 tab 为 4 个空格时，请勿勾选Use tab character。</p>
</li>
<li><p>注释的双斜线与注释内容之间有且仅有一个空格。正例：// 注释内容</p>
</li>
<li><p>单行字符数限制不超过 120 个，超出需要换行，换行时遵循如下原则: </p>
<ul>
<li>第二行相对第一行缩进 4 个空格，从第三行开始，不再继续缩进，参考示例。</li>
<li>运算符与下文一起换行。</li>
<li>方法调用的点符号与下文一起换行。</li>
<li>方法调用时，多个参数，需要换行时，在逗号后进行。</li>
<li>在括号前不要换行，见反例。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">正例：</span><br><span class="line">StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"><span class="comment">// 超过 120 个字符的情况下，换行缩进 4 个空格，点号和方法名称一起换行 sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...</span></span><br><span class="line">    .append(<span class="string">&quot;huang&quot;</span>)... </span><br><span class="line">    .append(<span class="string">&quot;huang&quot;</span>)... </span><br><span class="line">    .append(<span class="string">&quot;huang&quot;</span>);</span><br><span class="line"></span><br><span class="line">反例：</span><br><span class="line">StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"><span class="comment">// 超过 120 个字符的情况下，不要在括号前换行 sb.append(&quot;zi&quot;).append(&quot;xin&quot;)...append</span></span><br><span class="line">    (<span class="string">&quot;huang&quot;</span>);</span><br><span class="line"><span class="comment">// 参数很多的方法调用可能超过 120 个字符，不要在逗号前换行 </span></span><br><span class="line">method(args1, args2, args3, ...</span><br><span class="line">    , argsX); </span><br></pre></td></tr></table></figure>
</li>
<li><p>方法参数在定义和传入时，多个参数逗号后边必须加空格。如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">method(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>IDE的text file encoding设置为UTF-8; IDE中文件的换行符使用Unix格式，不要使用 Windows 格式。</p>
</li>
<li><p>没有必要增加若干空格来使某一行的字符与上一行对应位置的字符对齐</p>
</li>
<li><p>方法体内的执行语句组、变量的定义语句组、不同的业务逻辑之间或者不同的语义之间插入一个空行。相同业务逻辑和语义之间不需要插入空行。</p>
</li>
</ul>
<h3 id="4-控制语句"><a href="#4-控制语句" class="headerlink" title="4. 控制语句"></a>4. 控制语句</h3><ul>
<li><p>在一个 switch 块内，每个 case 要么通过 break/return 等来终止，要么注释说明程 序将继续执行到哪一个 case 为止;在一个 switch 块内，都必须包含一个 default 语句并且 放在最后，即使它什么代码也没有。</p>
</li>
<li><p>在 if/else/for/while/do 语句中必须使用大括号。即使只有一行代码，避免采用单行的编码方式:if (condition) statements;</p>
</li>
<li><p>表达异常的分支时，少用 if-else 方式，这种方式可以改写成:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123; </span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> obj; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果非得使用 if()…else if()…else…方式表达逻辑，【强制】避免后续代码维护困难，请勿超过 3 层。超过 3 层的 if-else 的逻辑判断代码可以使用卫语句、策略模式、状态模式等来实现。</p>
</li>
<li><p>除常用方法(如 getXxx/isXxx)等外，不要在条件判断中执行其它复杂的语句，将复 杂逻辑判断的结果赋值给一个有意义的布尔变量名，以提高可读性。</p>
</li>
</ul>
<h3 id="5-异常处理"><a href="#5-异常处理" class="headerlink" title="5. 异常处理"></a>5. 异常处理</h3><ul>
<li>对大段代码进行 try-catch，这是不负责任的表现。catch 时请分清稳定代码和非稳 定代码，稳定代码指的是无论如何不会出错的代码。对于非稳定代码的 catch 尽可能进行区分 异常类型，再做对应的异常处理。</li>
<li>异常不要用来做流程控制，条件控制，因为异常的处理效率比条件分支低。</li>
<li>捕获异常是为了处理它，不要捕获了却什么都不处理而抛弃之，如果不想处理它，请 将该异常抛给它的调用者。最外层的业务使用者，必须处理异常，将其转化为用户可以理解的内容。</li>
<li>捕获异常与抛异常，必须是完全匹配，或者捕获异常是抛异常的父类。</li>
<li>避免出现重复的代码(Don’t Repeat Yourself)，即DRY原则。必要时抽取共性方法，或者抽象公共类，甚至是组件化。</li>
</ul>
<hr>
<h2 id="四、Android规范"><a href="#四、Android规范" class="headerlink" title="四、Android规范"></a>四、Android规范</h2><p>注：采用模块化开发时，资源文件和源文件需带模块前缀，使用下划线与后面的内容分隔开。</p>
<h3 id="1-资源文件命名与使用"><a href="#1-资源文件命名与使用" class="headerlink" title="1. 资源文件命名与使用"></a>1. 资源文件命名与使用</h3><ul>
<li><p>layout文件的命名：单词间使用下划线分隔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Activity 的 layout 以 act_name 开头 </span><br><span class="line">Fragment 的 layout 以 fragment_name 开头</span><br><span class="line">Dialog 的 layout 以 dialog_name 开头</span><br><span class="line">include 的 layout 以 layout_module 开头</span><br><span class="line">ListView、GridView和RecyclerView等列表的行 layout 以 item_name 开头 </span><br><span class="line">PopupWindow 的layout 以 pop_name</span><br></pre></td></tr></table></figure>
</li>
<li><p>drawable 资源名称以类型缩写_小写单词的方式命名，根据分辨率不同存放在不同的 drawable 目录下，如果介意包大小建议只使用一套，系统去进行缩放。采用规则如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">控件描述_业务功能描述_控件状态限定词</span><br></pre></td></tr></table></figure>
</li>
<li><p>anim 资源名称以小写单词+下划线的方式命名，采用以下规则:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">逻辑名称_[方向|序号]</span><br></pre></td></tr></table></figure>
</li>
<li><p>color 资源使用#RRGGBB 格式，写入 colors.xml 文件中，命名格式采用以下规则:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">逻辑名称_颜色</span><br></pre></td></tr></table></figure>
</li>
<li><p>dimen 资源以小写单词+下划线方式命名，写入 dimens.xml 文件中。</p>
</li>
<li><p>style 资源采用首字母大写的驼峰式方式命名，写入 styles.xml 文件中。</p>
</li>
<li><p>string 资源文件或者文本用到字符需要全部写入 strings.xml 文件中，字符串以小写单词+下划线的方式命名</p>
</li>
<li><p>Id 资源原则上以驼峰法命名，View 组件的资源 id 建议以 View 的缩写作为前缀。常用缩写表如下:</p>
<table>
<thead>
<tr>
<th align="center">控件</th>
<th align="center">缩写</th>
</tr>
</thead>
<tbody><tr>
<td align="center">LinearLayout</td>
<td align="center">ll</td>
</tr>
<tr>
<td align="center">RelativeLayout</td>
<td align="center">rl</td>
</tr>
<tr>
<td align="center">ConstraintLayout</td>
<td align="center">cl</td>
</tr>
<tr>
<td align="center">ListView</td>
<td align="center">lv</td>
</tr>
<tr>
<td align="center">ScollView</td>
<td align="center">sv</td>
</tr>
<tr>
<td align="center">TextView</td>
<td align="center">tv</td>
</tr>
<tr>
<td align="center">Button</td>
<td align="center">btn</td>
</tr>
<tr>
<td align="center">ImageView</td>
<td align="center">iv</td>
</tr>
<tr>
<td align="center">CheckBox</td>
<td align="center">cb</td>
</tr>
<tr>
<td align="center">RadioButton</td>
<td align="center">rb</td>
</tr>
<tr>
<td align="center">EditText</td>
<td align="center">et</td>
</tr>
</tbody></table>
<p>其它控件的缩写推荐使用小写字母并用下划线进行分割，例如:ProgressBar 对应</p>
<p>的缩写为 progress_bar;DatePicker 对应的缩写为 date_picker。</p>
</li>
<li><p>图片根据其分辨率，放在不同屏幕密度的 drawable 目录下管理</p>
<table>
<thead>
<tr>
<th align="center">dpi级别</th>
<th align="center">屏幕密度</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ldpi</td>
<td align="center">120dpi</td>
</tr>
<tr>
<td align="center">mdpi</td>
<td align="center">160dpi</td>
</tr>
<tr>
<td align="center">hdpi</td>
<td align="center">240dpi</td>
</tr>
<tr>
<td align="center">xhdpi</td>
<td align="center">320dpi</td>
</tr>
<tr>
<td align="center">xxhdpi</td>
<td align="center">480dpi</td>
</tr>
<tr>
<td align="center">xxxhdpi</td>
<td align="center">640dpi</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="2-基本组件"><a href="#2-基本组件" class="headerlink" title="2. 基本组件"></a>2. 基本组件</h3><p>Android 基 本 组 件 指 Activity 、 Fragment 、 Service 、 BroadcastReceiver 、ContentProvider 等等。</p>
<ul>
<li><p>Activity 间的数据通信，对于数据量比较大的，避免使用 Intent + Parcelable的方式，可以考虑 EventBus 等替代方案，以免造成TransactionTooLargeException。</p>
</li>
<li><p>Activity#onSaveInstanceState()方法不是 Activity 生命周期方法，也不保证一定会被调用。它是用来在 Activity 被意外销毁时保存 UI 状态的，只能用于保存临时性数据，例如 UI 控件的属性等，不能跟数据的持久化存储混为一谈。持久化存储应该在Activity#onPause()/onStop()中实行。</p>
</li>
<li><p>Activity 间通过隐式 Intent 的跳转，在发出 Intent 之前必须通过 resolveActivity 检查，避免找不到合适的调用组件，造成ActivityNotFoundException 的异常。</p>
</li>
<li><p>避免在 Service#onStartCommand()/onBind()方法中执行耗时操作，如果确实有需求，应改用 IntentService 或采用其他异步机制完成。</p>
</li>
<li><p>避免在 BroadcastReceiver#onReceive()中执行耗时操作，如果有耗时工作，应该创建 IntentService 完成，而不应该在 BroadcastReceiver 内创建子线程去做。</p>
<p>说明:</p>
<p>由于该方法是在主线程执行，如果执行耗时操作会导致 UI 不流畅。可以使用IntentService 、创 建 HandlerThread 或者调用Context#registerReceiver (BroadcastReceiver, IntentFilter, String, Handler)方法等方式，在其他 Wroker 线程执行 onReceive 方法。BroadcastReceiver#onReceive()方法耗时超过 10 秒钟，可能会被系统杀死。</p>
</li>
<li><p>避免使用隐式 Intent 广播敏感信息，信息可能被其他注册了对应 BroadcastReceiver 的 App 接收。</p>
</li>
<li><p>添 加 Fragment 时 ， 确 保 FragmentTransaction#commit() 在 Activity#onPostResume()或FragmentActivity#onResumeFragments()内调用。 不要随意使用 FragmentTransaction#commitAllowingStateLoss()来代替，任何 commitAllowingStateLoss()的使用必须经过 code review，确保无负面影响。</p>
<p>说明:</p>
<p>Activity 可能因为各种原因被销毁，Android 支持页面被销毁前通过Activity#onSaveInstanceState() 保存自己的状态。但如果FragmentTransaction.commit()发生在 Activity 状态保存之后，就会导致 Activity 重建、恢复状态时无法还原页面状态，从而可能出错。为了避免给用户造成不好的体验，系统会抛出IllegalStateExceptionStateLoss 异常。推荐的做法是在 Activity 的onPostResume() 或 onResumeFragments() ( 对 FragmentActivity ) 里执行 FragmentTransaction.commit()，如有必要也可在onCreate()里执行。不要随意改用FragmentTransaction.commitAllowingStateLoss() 或者直接使用 try-catch 避免 crash，这不是问题的根本解决之道，当且仅当你确认 Activity 重建、恢复状态时，本次 commit 丢失不会造成影响时才可这么做。</p>
</li>
<li><p>不要在 Activity#onDestroy()内执行释放资源的工作，例如一些工作线程的销毁和停止，因为 onDestroy()执行的时机可能较晚。可根据实际需要，在 Activity#onPause()/onStop()中结合 isFinishing() 的判断来执行。</p>
</li>
<li><p>如非必须，避免使用嵌套的 Fragment。Fragment 嵌套使用会有一些坑，容易出现 bug，比较常见的问题有如下几种:</p>
<ul>
<li>onActivityResult()方法的处理错乱，内嵌的 Fragment 可能收不到该方法的回调，需要由宿主 Fragment 进行转发处理;</li>
<li>突变动画效果;</li>
<li>被继承的 setRetainInstance() ，导致在 Fragment 重建时多次触发不必要的逻辑。</li>
</ul>
</li>
<li><p>总是使用显式Intent启动或者绑定Service，且不要为服务声明IntentFilter， 保证应用的安全性。如果确实需要使用隐式调用，则可为 Service 提供 Intent Filter 并从 Intent 中排除相应的组件名称，但必须搭配使用 Intent#setPackage()方法设置 Intent 的指定包名，这样可以充分消除目标服务的不确定性。</p>
</li>
<li><p>Service 需要以多线程来并发处理多个启动请求，建议使用 IntentService， 可避免各种复杂的设置。</p>
</li>
<li><p>对于只用于应用内的广播，优先使用 LocalBroadcastManager 来进行注册和发送，LocalBroadcastManager 安全性更好，同时拥有更高的运行效率。</p>
</li>
<li><p>当前 Activity 的 onPause 方法执行结束后才会创建(onCreate)或恢复 (onRestart)别的 Activity，所以在 onPause 方法中不适合做耗时较长的工作，这 会影响到页面之间的跳转效率。</p>
</li>
<li><p>Activity 或者 Fragment 中动态注册 BroadCastReceiver 时，registerReceiver() 和 unregisterReceiver()要成对出现。</p>
</li>
<li><p>Android 基础组件如果使用隐式调用，应在 AndroidManifest.xml 中使用 <intent-filter> 或在代码中使用 IntentFilter 增加过滤。</p>
</li>
</ul>
<h3 id="3-UI与布局"><a href="#3-UI与布局" class="headerlink" title="3. UI与布局"></a>3. UI与布局</h3><ul>
<li><p>布局中不得不使用 ViewGroup 多重嵌套时，不要使用 LinearLayout 嵌套，改用 RelativeLayout或ConstraintLayout，可以有效降低嵌套数。</p>
<p>说明:</p>
<p>Android 应用页面上任何一个 View 都需要经过 measure、layout、draw 三个步骤才能被正确的渲染。从 xml layout 的顶部节点开始进行 measure，每个子节点都需 要向自己的父节点提供自己的尺寸来决定展示的位置，在此过程中可能还会重新measure(由此可能导致 measure 的时间消耗为原来的 2-3 倍)。节点所处位置越深，嵌套带来的 measure 越多，计算就会越费时。这就是为什么扁平的 View 结构会性能更好。</p>
<p>同时，页面拥上的 View 越多，measure、layout、draw 所花费的时间就越久。要缩 短这个时间，关键是保持 View 的树形结构尽量扁平，而且要移除所有不需要渲染的View。理想情况下，总共的 measure，layout，draw 时间应该被很好的控制在16ms以内，以保证滑动屏幕时 UI 的流畅。要找到那些多余的 View(增加渲染延迟的 view)，可以用 Android Studio Monitor里的 Hierarchy Viewer 工具，可视化的查看所有的 view。</p>
</li>
<li><p>禁止在非 UI 线程进行 View 相关操作。</p>
</li>
<li><p>源文件统一采用 UTF-8 的形式进行编码。</p>
</li>
<li><p>文本大小使用单位 dp，View 大小使用单位 dp。对于 TextView，如果在文字大小确定的情况下推荐使用 wrap_content 布局避免出现文字显示不全的适配问题。</p>
</li>
<li><p>禁止在设计布局时多次为子 View 和父 View 设置同样背景进而造成页面过度绘制，推荐将不需要显示的布局进行及时隐藏（即不应在XML资源文件和java文件同时设置）。</p>
</li>
<li><p>不能在 Activity 没有完全显示时显示 PopupWindow 和 Dialog。</p>
</li>
<li><p>尽量不要使用 AnimationDrawable，它在初始化的时候就将所有图片加载 到内存中，特别占内存，并且还不能释放，释放之后下次进入再次加载时会报错。</p>
</li>
<li><p>不能使用 ScrollView 包裹 ListView/GridView/ExpandableListVIew;因为这样会把 ListView 的所有 Item 都加载到内存中，要消耗巨大的内存和 cpu 去绘制图面。推荐使用 NestedScrollView。</p>
</li>
<li><p>不要在 Android 的 Application 对象中缓存数据。基础组件之间的数据共享请使用 Intent 等机制，也可使用 SharedPreferences 等数据持久化机制。</p>
</li>
<li><p>使用 Toast 时，建议定义一个全局的 Toast 对象，这样可以避免连续显示 Toast 时不能取消上一次 Toast 消息的情况。即使需要连续弹出 Toast，也应避免直接调用 Toast#makeText。</p>
</li>
<li><p>使用 Adapter 的时候，如果你使用了 ViewHolder 做缓存，在 getView()的 方法中无论这项 convertView 的每个子控件是否需要设置属性(比如某个 TextView 设置的文本可能为 null，某个按钮的背景色为透明，某控件的颜色为透明等)，都需要为其显式设置属性(Textview 的文本为空也需要设置 setText(“”)，背景透明也需要设置)，否则在滑动的过程中，因为 adapter item 复用的原因，会出现内容的显示错乱。</p>
</li>
<li><p>在需要时刻刷新某一区域的组件时，建议通过以下方式避免引发全局 layout 刷新:</p>
<ul>
<li><p>设置固定的 View 大小的宽高，如倒计时组件等;</p>
</li>
<li><p>调用 View 的 layout 方法修改位置，如弹幕组件等;</p>
</li>
<li><p>通过修改 Canvas 位置并且调用 invalidate(int l, int t, int r, int b)等方式限定刷新</p>
<p>区域</p>
</li>
</ul>
</li>
</ul>
<h3 id="4-进程、线程与消息通信"><a href="#4-进程、线程与消息通信" class="headerlink" title="4. 进程、线程与消息通信"></a>4. 进程、线程与消息通信</h3><ul>
<li>不要通过 Intent 在 Android 基础组件之间传递大数据(binder transaction 缓存为 1MB)，可能导致 OOM。</li>
<li>在 Application 的业务初始化代码加入进程判断，确保只在自己需要的进程 初始化。特别是后台进程减少不必要的业务初始化。</li>
<li>新建线程时，必须通过线程池提供(AsyncTask 或者 ThreadPoolExecutor 或者其他形式自定义的线程池)，不允许在应用中自行显式创建线程。</li>
<li>线程池不允许使用 Executors 去创建，而是通过 ThreadPoolExecutor 的方式，这样的处理方式让写的同学更加明确线程池的运行规则，规避资源耗尽的风险。</li>
<li>子线程中不能更新界面，更新界面必须在主线程中进行，网络操作不能在主线程中调用。</li>
<li>禁止在多进程之间用 SharedPreferences 共享数据，虽然可以 (MODE_MULTI_PROCESS)，但官方已不推荐。</li>
<li>谨慎使用 Android 的多进程，多进程虽然能够降低主进程的内存压力，但会遇到如下问题:<ul>
<li>首次进入新启动进程的页面时会有延时的现象(有可能黑屏、白屏几秒，是白屏还是黑屏和新 Activity 的主题有关);</li>
<li>应用内多进程时，Application 实例化多次，需要考虑各个模块是否都需要在所有进程中初始化。</li>
</ul>
</li>
</ul>
<h3 id="5-文件与数据库"><a href="#5-文件与数据库" class="headerlink" title="5. 文件与数据库"></a>5. 文件与数据库</h3><ul>
<li><p>任何时候不要硬编码文件路径，请使用 Android 文件系统 API 访问。</p>
</li>
<li><p>当使用外部存储时，必须检查外部存储的可用性。</p>
</li>
<li><p>应用间共享文件时，不要通过放宽文件系统权限的方式去实现，而应使用 FileProvider。</p>
</li>
<li><p>SharedPreference 中只能存储简单数据类型(int、boolean、String 等)，复杂数据类型建议使用文件、数据库等其他方式存储。</p>
</li>
<li><p>SharedPreference 提交数据时，尽量使用 Editor#apply()，而非 Editor#commit()。一般来讲，仅当需要确定提交结果，并据此有后续操作时，才使 用 Editor#commit()。</p>
<p>说明:</p>
<p>SharedPreference 相关修改使用 apply 方法进行提交会先写入内存，然后异步写入磁盘，commit 方法是直接写入磁盘。如果频繁操作的话 apply 的性能会优于 commit，apply 会将最后修改内容写入磁盘。但是如果希望立刻获取存储操作的结果，并据此做相应的其他操作，应当使用 commit。</p>
</li>
<li><p>数据库 Cursor 必须确保使用完后关闭，以免内存泄漏。</p>
</li>
<li><p>多线程操作写入数据库时，需要使用事务，以免出现同步问题。</p>
</li>
<li><p>大数据写入数据库时，请使用事务或其他能够提高 I/O 效率的机制，保证执行速度。</p>
</li>
<li><p>执行 SQL 语句时，应使用 SQLiteDatabase#insert()、update()、delete()， 不要使用SQLiteDatabase#execSQL()，以免 SQL 注入风险。</p>
</li>
<li><p>如果 ContentProvider 管理的数据存储在 SQL 数据库中，应该避免将不受 信任的外部数据直接拼接在原始 SQL 语句中。</p>
</li>
</ul>
<h3 id="6-图片与动画"><a href="#6-图片与动画" class="headerlink" title="6. 图片与动画"></a>6. 图片与动画</h3><ul>
<li>加载大图片或者一次性加载多张图片，应该在异步线程中进行。图片的加 载，涉及到 IO 操作，以及 CPU 密集操作，很可能引起卡顿。</li>
<li>在 ListView，ViewPager，RecyclerView，GirdView 等组件中使用图片时， 应做好图片的缓存，避免始终持有图片导致内存溢出，也避免重复创建图片，引起性能问题。建议使用 Glide (<a target="_blank" rel="noopener" href="https://github.com/bumptech/glide)%E5%9B%BE%E7%89%87%E5%BA%93%E3%80%82">https://github.com/bumptech/glide)图片库。</a></li>
<li>png 图片使用 TinyPNG 或者类似工具压缩处理，减少包体积。</li>
<li>应根据实际展示需要，压缩图片，而不是直接显示原图。手机屏幕比较小，直接显示原图，并不会增加视觉上的收益，但是却会耗费大量宝贵的内存。</li>
<li>使用完毕的图片，应该及时回收，释放宝贵的内存。</li>
<li>在 Activity#onPause()或 Activity#onStop()回调中，关闭当前 activity 正在执 行的的动画。</li>
<li>在动画或者其他异步任务结束时，应该考虑回调时刻的环境是否还支持业 务处理。例如 Activity 的 onStop()函数已经执行，且在该函数中主动释放了资源， 此时回调中如果不做判断就会空指针崩溃。</li>
<li>当 View Animation 执行结束时，调用 View.clearAnimation()释放相关资源。</li>
<li>推荐使用 inBitmap 重复利用内存空间，避免重复开辟新内存。</li>
</ul>
<h3 id="7-安全"><a href="#7-安全" class="headerlink" title="7. 安全"></a>7. 安全</h3><ul>
<li>将 android:allowbackup 属性必须设置为 false，阻止应用数据被导出。</li>
<li>不要把敏感信息打印到 log 中。</li>
<li>确保应用发布版本的 android:debuggable 属性设置为 false。</li>
<li>MD5 和 SHA-1、SHA-256 等常用算法是 Hash 算法，有一定的安全性， 但不能代替加密算法。敏感信息的存储和传输，需要使用专业的加密机制。</li>
</ul>
<h3 id="8-日志"><a href="#8-日志" class="headerlink" title="8. 日志"></a>8. 日志</h3><ul>
<li><p>不能使用 System.out.println 打印 log。</p>
</li>
<li><p>Log 的 tag 不能是” “。应在每个文件定义TAG，TAG为相应文件名。例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static String TAG &#x3D; &quot;LoginActivity&quot;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>临时debug的日志，使用后及时删除。</p>
</li>
</ul>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">wanggh8</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://wanggh8.gitee.io/Android/Android%20rule/">https://wanggh8.gitee.io/Android/Android%20rule/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="http://www.opensource.org/licenses/Apache-2.0" target="_blank">Apache-2.0</a> 许可协议。转载请注明来自 <a href="https://wanggh8.gitee.io" target="_blank">Petithao</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Android/">Android</a></div><div class="post_share"><div class="social-share" data-image="/images/android-black.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Android/Kotlin/"><img class="prev-cover" data-lazy-src="/images/kotlin.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Kotlin</div></div></a></div><div class="next-post pull-right"><a href="/Android/NestedScrollView/"><img class="next-cover" data-lazy-src="/images/android-black.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">NestedScrollView</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/Android/Activity/" title="Android Activity"><img class="relatedPosts_cover" data-lazy-src="/images/android-black.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-15</div><div class="relatedPosts_title">Android Activity</div></div></a></div><div class="relatedPosts_item"><a href="/Android/Android Library/" title="Android开源框架"><img class="relatedPosts_cover" data-lazy-src="/images/android-black.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-21</div><div class="relatedPosts_title">Android开源框架</div></div></a></div><div class="relatedPosts_item"><a href="/Android/Android Studio/" title="Android Studio 指南"><img class="relatedPosts_cover" data-lazy-src="/images/android-black.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-16</div><div class="relatedPosts_title">Android Studio 指南</div></div></a></div></div></div></article></main><footer id="footer" style="background-image: url(/images/android-hero.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2020 By wanggh8</div><div class="icp"><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/"><img class="icp-icon" src="/img/icp.png"/><span>豫ICP备20009142号-1</span></a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script></div></body></html>